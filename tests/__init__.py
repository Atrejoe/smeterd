class SerialMock(object):
    lines_in_buffer = []

    def __init__(self, port, *args, **kwargs):
        self.name = port
        self.open()

    def open(self):
        self.is_open = True;

    def close(self):
        self.is_open = False;

    def isOpen(self):
        return self.is_open

    def setRTS(self, value):
        pass

    def readline(self):
        if len(self.lines_in_buffer) > 0:
            return self.lines_in_buffer.pop(0)
        else:
            raise Exception('empty buffer')
            return ''



NORMAL_PACKET = '''/ISk5\2ME382-1004

0-0:96.1.1(4B414C37303035313135383130323132)
1-0:1.8.1(00608.400*kWh)
1-0:1.8.2(00490.342*kWh)
1-0:2.8.1(00000.001*kWh)
1-0:2.8.2(00000.000*kWh)
0-0:96.14.0(0001)
1-0:1.7.0(0001.51*kW)
1-0:2.7.0(0000.00*kW)
0-0:17.0.0(0999.00*kW)
0-0:96.3.10(1)
0-0:96.13.1()
0-0:96.13.0()
0-1:24.1.0(3)
0-1:96.1.0(3238303131303031323332313337343132)
0-1:24.3.0(130810180000)(00)(60)(1)(0-1:24.2.1)(m3)
(00947.680)
0-1:24.4.0(1)
!'''

NORMAL_PACKET_1003 = '''/ISk5\2ME382-1003

0-0:96.1.1(5A424556303035303933313937373132)
1-0:1.8.1(00608.400*kWh)
1-0:1.8.2(00490.342*kWh)
1-0:2.8.1(00000.001*kWh)
1-0:2.8.2(00000.000*kWh)
0-0:96.14.0(0001)
1-0:1.7.0(0001.51*kW)
1-0:2.7.0(0000.00*kW)
0-0:17.0.0(0999.00*kW)
0-0:96.3.10(1)
0-0:96.13.1()
0-0:96.13.0()
!'''

BROKEN_PACKET = '''1-0:1.7.0(0001.51*kW)
1-0:2.7.0(0000.00*kW)
0-0:17.0.0(0999.00*kW)
0-0:96.3.10(1)
0-0:96.13.1()
0-0:96.13.0()
0-1:24.1.0(3)
0-1:96.1.0(3238303131303031323332313337343132)
0-1:24.3.0(130810180000)(00)(60)(1)(0-1:24.2.1)(m3)
(00947.680)
0-1:24.4.0(1)
!'''

LONG_BROKEN_PACKET = '''/ISk5\2ME382-1004

0-0:96.1.1(4B414C37303035313135383130323132)
1-0:1.8.1(00608.400*kWh)
1-0:1.8.2(00490.342*kWh)
1-0:2.8.1(00000.001*kWh)
1-0:2.8.2(00000.000*kWh)
0-0:96.14.0(0001)
1-0:1.7.0(0001.51*kW)
1-0:2.7.0(0000.00*kW)
0-0:17.0.0(0999.00*kW)
0-0:96.3.10(1)
0-0:96.13.1()
0-0:96.13.0()
0-1:24.1.0(3)
0-1:96.1.0(3238303131303031323332313337343132)
0-1:24.3.0(130810180000)(00)(60)(1)(0-1:24.2.1)(m3)
(00947.680)
0-1:24.4.0(1)

/ISk5\2ME382-1004

0-0:96.1.1(4B414C37303035313135383130323132)
1-0:1.8.1(00608.400*kWh)
1-0:1.8.2(00490.342*kWh)
1-0:2.8.1(00000.001*kWh)
1-0:2.8.2(00000.000*kWh)
0-0:96.14.0(0001)
1-0:1.7.0(0001.51*kW)
1-0:2.7.0(0000.00*kW)
0-0:17.0.0(0999.00*kW)
0-0:96.3.10(1)
0-0:96.13.1()
0-0:96.13.0()
0-1:24.1.0(3)
0-1:96.1.0(3238303131303031323332313337343132)
0-1:24.3.0(130810180000)(00)(60)(1)(0-1:24.2.1)(m3)
(00947.680)
0-1:24.4.0(1)

/ISk5\2ME382-1004

0-0:96.1.1(4B414C37303035313135383130323132)
1-0:1.8.1(00608.400*kWh)
1-0:1.8.2(00490.342*kWh)
1-0:2.8.1(00000.001*kWh)
1-0:2.8.2(00000.000*kWh)
0-0:96.14.0(0001)
1-0:1.7.0(0001.51*kW)
1-0:2.7.0(0000.00*kW)
0-0:17.0.0(0999.00*kW)
0-0:96.3.10(1)
0-0:96.13.1()
0-0:96.13.0()
0-1:24.1.0(3)
0-1:96.1.0(3238303131303031323332313337343132)
0-1:24.3.0(130810180000)(00)(60)(1)(0-1:24.2.1)(m3)
(00947.680)
0-1:24.4.0(1)
'''

NORMAL_PACKET_KAIFA1 = '''/KFM5KAIFA-METER

1-3:0.2.8(42)
0-0:1.0.0(160905191440S)
0-0:96.1.1(XXXXXXXXXXXXXXMYSERIALXXXXXXXXXXXXXX)
1-0:1.8.1(000498.215*kWh)
1-0:1.8.2(000550.159*kWh)
1-0:2.8.1(000000.001*kWh)
1-0:2.8.2(000000.000*kWh)
0-0:96.14.0(0002)
1-0:1.7.0(00.235*kW)
1-0:2.7.0(00.000*kW)
0-0:96.7.21(00008)
0-0:96.7.9(00003)
1-0:99.97.0(1)(0-0:96.7.19)(000101000015W)(2147483647*s)
1-0:32.32.0(00000)
1-0:52.32.0(00000)
1-0:72.32.0(00000)
1-0:32.36.0(00000)
1-0:52.36.0(00000)
1-0:72.36.0(00000)
0-0:96.13.1()
0-0:96.13.0()
1-0:31.7.0(000*A)
1-0:51.7.0(000*A)
1-0:71.7.0(000*A)
1-0:21.7.0(00.086*kW)
1-0:41.7.0(00.122*kW)
1-0:61.7.0(00.027*kW)
1-0:22.7.0(00.000*kW)
1-0:42.7.0(00.000*kW)
1-0:62.7.0(00.000*kW)
0-1:24.1.0(003)
0-1:96.1.0(4730303235303033333337343136333136)
0-1:24.2.1(160905190000S)(00323.528*m3)
!9867'''

NORMAL_PACKET_KAIFA2 = '''/XMX5LGBBFFB231158062

1-3:0.2.8(42)
0-0:1.0.0(160904220447S)
0-0:96.1.1(XXXXXXXXSERIALXXXXXXXXXXX)
1-0:1.8.1(004018.859*kWh)
1-0:2.8.1(000000.002*kWh)
1-0:1.8.2(002827.154*kWh)
1-0:2.8.2(000000.000*kWh)
0-0:96.14.0(0001)
1-0:1.7.0(00.341*kW)
1-0:2.7.0(00.000*kW)
1-0:32.36.0(00000)
0-0:96.13.1()
0-0:96.13.0()
1-0:31.7.0(002*A)
1-0:21.7.0(00.341*kW)
1-0:22.7.0(00.000*kW)
0-1:24.1.0(003)
0-1:96.1.0(4730303233353631323139373231393134)
0-1:24.2.1(160904220000S)(05290.211*m3)
!D7BA'''